<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple To‑Do List</title>
  <style>
    :root{ --bg:#0f1724; --card:#0b1220; --muted:#94a3b8; --accent:#06b6d4; --success:#10b981; --danger:#ef4444; }
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial; background:linear-gradient(180deg,#051025 0%, #071330 100%); color:#e6eef8; margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px}
    .app{width:100%;max-width:760px;background:linear-gradient(180deg,rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; box-shadow:0 10px 30px rgba(2,6,23,0.7); padding:20px}
    header{display:flex;align-items:center;gap:12px}
    header h1{margin:0;font-size:1.2rem}
    .new-task{margin-top:18px;display:flex;gap:8px}
    .new-task input{flex:1;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit;font-size:0.95rem}
    .btn{background:var(--accent);border:none;padding:10px 14px;border-radius:8px;color:#042024;cursor:pointer;font-weight:600}
    .controls{display:flex;align-items:center;justify-content:space-between;margin-top:14px;gap:10px}
    .filters{display:flex;gap:8px}
    .filter-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:8px;color:var(--muted);cursor:pointer}
    .filter-btn.active{background:rgba(255,255,255,0.03);color:var(--accent);border-color:rgba(255,255,255,0.06)}
    ul.tasks{list-style:none;margin:16px 0 6px 0;padding:0}
    li.task{display:flex;align-items:center;gap:12px;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}
    li.task + li.task{margin-top:8px}
    .task .checkbox{width:18px;height:18px;border-radius:4px;border:2px solid rgba(255,255,255,0.08);display:inline-grid;place-items:center;cursor:pointer}
    .task.completed .checkbox{background:linear-gradient(180deg,var(--success), #059669);border-color:transparent}
    .task .title{flex:1}
    .task.completed .title{text-decoration:line-through;opacity:0.6}
    .task .actions{display:flex;gap:8px}
    .icon-btn{background:transparent;border:0;color:var(--muted);cursor:pointer;padding:6px;border-radius:6px}
    .icon-btn:hover{background:rgba(255,255,255,0.01);color:#fff}
    .small{font-size:0.85rem;color:var(--muted)}
    @media (max-width:540px){ .app{padding:12px} header h1{font-size:1rem} }
  </style>
</head>
<body>
  <main class="app" role="application" aria-labelledby="app-name">
    <header>
      <h1 id="app-name">To‑Do List</h1>
      <div class="small">(localStorage — works offline)</div>
    </header>

    <section class="new-task" aria-label="Add new task">
      <input id="newTaskInput" type="text" placeholder="Add a new task and press Enter or Add" aria-label="New task description">
      <button id="addBtn" class="btn">Add</button>
    </section>

    <section class="controls" aria-label="Task controls">
      <div class="filters" role="tablist" aria-label="Filter tasks">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="active">Active</button>
        <button class="filter-btn" data-filter="completed">Completed</button>
      </div>
      <div style="display:flex;align-items:center;gap:10px">
        <div class="small" id="itemsLeft">0 items left</div>
        <button id="clearCompleted" class="filter-btn">Clear completed</button>
      </div>
    </section>

    <ul class="tasks" id="tasksList" aria-live="polite"></ul>

    <div class="small" style="margin-top:12px;opacity:0.8">Double-click a task to edit. Press Enter to save, Esc to cancel.</div>
  </main>

  <script>
    // Simple to‑do app with localStorage persistence

    const selectors = {
      input: document.getElementById('newTaskInput'),
      addBtn: document.getElementById('addBtn'),
      tasksList: document.getElementById('tasksList'),
      filters: Array.from(document.querySelectorAll('.filter-btn')),
      itemsLeft: document.getElementById('itemsLeft'),
      clearCompleted: document.getElementById('clearCompleted')
    };

    let tasks = loadTasks();
    let filter = 'all';

    function saveTasks(){ localStorage.setItem('todo_tasks_v1', JSON.stringify(tasks)); }
    function loadTasks(){ try{ return JSON.parse(localStorage.getItem('todo_tasks_v1')) || []; }catch(e){ return []; } }

    function uid(){ return Date.now().toString(36) + Math.random().toString(36).slice(2,6); }

    function addTask(text){ const t = { id: uid(), text: text.trim(), completed: false, created: Date.now() }; tasks.unshift(t); saveTasks(); render(); }

    function updateTask(id, fields){ tasks = tasks.map(t => t.id===id ? {...t, ...fields} : t); saveTasks(); render(); }
    function removeTask(id){ tasks = tasks.filter(t => t.id!==id); saveTasks(); render(); }

    function clearCompleted(){ tasks = tasks.filter(t => !t.completed); saveTasks(); render(); }

    function render(){
      // filter tasks
      let visible = tasks;
      if(filter==='active') visible = tasks.filter(t=>!t.completed);
      if(filter==='completed') visible = tasks.filter(t=>t.completed);

      selectors.tasksList.innerHTML = '';
      if(visible.length===0){ const li = document.createElement('li'); li.className='small'; li.textContent='No tasks — add one!'; li.style.padding='10px'; selectors.tasksList.appendChild(li); }

      visible.forEach(t => {
        const li = document.createElement('li'); li.className='task'; if(t.completed) li.classList.add('completed'); li.setAttribute('data-id', t.id);

        // checkbox
        const cb = document.createElement('button'); cb.className='checkbox'; cb.title='Toggle completed'; cb.setAttribute('aria-pressed', t.completed);
        cb.innerHTML = t.completed ? '✔' : '';
        cb.addEventListener('click', ()=> updateTask(t.id, {completed: !t.completed}));

        // title
        const title = document.createElement('div'); title.className = 'title'; title.tabIndex = 0; title.textContent = t.text;
        title.addEventListener('dblclick', ()=> startEditing(li, t));

        // actions
        const actions = document.createElement('div'); actions.className='actions';
        const editBtn = document.createElement('button'); editBtn.className='icon-btn'; editBtn.title='Edit'; editBtn.innerHTML='✏️';
        editBtn.addEventListener('click', ()=> startEditing(li, t));
        const delBtn = document.createElement('button'); delBtn.className='icon-btn'; delBtn.title='Delete'; delBtn.innerHTML='🗑️';
        delBtn.addEventListener('click', ()=> removeTask(t.id));

        actions.appendChild(editBtn); actions.appendChild(delBtn);

        li.appendChild(cb); li.appendChild(title); li.appendChild(actions);
        selectors.tasksList.appendChild(li);
      });

      const left = tasks.filter(t=>!t.completed).length;
      selectors.itemsLeft.textContent = left + (left===1 ? ' item left' : ' items left');

      // update filter buttons active class
      selectors.filters.forEach(btn => {
        btn.classList.toggle('active', btn.dataset.filter===filter);
      });
    }

    function startEditing(li, task){
      // prevent multiple editors
      const existing = li.querySelector('input'); if(existing) return;
      li.classList.add('editing');

      const titleDiv = li.querySelector('.title');
      const input = document.createElement('input'); input.type='text'; input.value = task.text; input.style.width='100%'; input.style.padding='8px'; input.style.borderRadius='6px'; input.style.border='1px solid rgba(255,255,255,0.06)'; input.style.background='transparent'; input.style.color='inherit';

      // replace title with input
      li.replaceChild(input, titleDiv);
      input.focus();
      input.select();

      function finish(save){ if(save){ const newText = input.value.trim(); if(newText.length===0){ removeTask(task.id); } else { updateTask(task.id, {text:newText}); }} else { render(); } }

      input.addEventListener('keydown', (e)=>{
        if(e.key==='Enter'){ finish(true); }
        if(e.key==='Escape'){ finish(false); }
      });
      input.addEventListener('blur', ()=> finish(true));
    }

    // wire events
    selectors.addBtn.addEventListener('click', ()=>{ const v = selectors.input.value.trim(); if(!v) return; addTask(v); selectors.input.value=''; selectors.input.focus(); });
    selectors.input.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ selectors.addBtn.click(); }});

    selectors.filters.forEach(btn => { btn.addEventListener('click', ()=>{ filter = btn.dataset.filter; render(); }); });

    selectors.clearCompleted.addEventListener('click', ()=>{ clearCompleted(); });

    // initial render
    render();

    // Expose for debugging if needed
    window._todo = { tasks, addTask, updateTask, removeTask };
  </script>
</body>
</html>